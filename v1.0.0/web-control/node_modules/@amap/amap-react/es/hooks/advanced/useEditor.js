import{__read as r}from"../../_virtual/_tslib.js";import{useEffect as t}from"react";import e from"../utils/useReactiveRef.js";import n from"../../usePlugins.js";import o from"../utils/useCaptureChild.js";function i(i,u){var f=n(i.plugins),s=r(o(),2),c=s[0],a=s[1],d=e();return t((function(){var r=d.current;if(f)if(c){if(!r){var t=i.init(c);return d.current=t,void t.on(i.events,(function(r){var t=u.onChange;(void 0===t?function(){}:t)(r.target)}))}u.enabled?r.open():r.close()}else r&&("function"==typeof r.destroy&&r.destroy(),d.current=void 0)}),[f,c,d.current,u.enabled]),t((function(){return function(){var r=d.current;r&&("function"==typeof r.destroy&&r.destroy(),d.current=void 0)}}),[]),[d.current,a]}export default i;
