"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./_virtual/_tslib.js"),t=require("react"),s=require("./hooks/events.js"),n=require("./utils/compare.js"),i=require("./utils/clone.js"),o=require("./hooks/props.js"),r=require("./utils/convert.js"),u=require("./utils/options.js"),a=require("./useAmap.js"),l=require("./hooks/component.js"),c=require("./utils/types.js"),p=require("react-dom"),f=t.forwardRef((function(f,d){var v=a.default(),m=f.visible,P=void 0===m||m,g=t.useMemo((function(){return document.createElement("div")}),[]),q=l.default({init:function(t){var s=e.__assign(e.__assign({},u.getInitialOptionsFromProps(f,!0,[],["className","style"])),{position:i.default(f.position)});return new t.InfoWindow(s)},add:function(e,t){if(t.setMap(e),P){var s=r.lngLat2Array(t.getPosition());t.open(e,s)}}},f);return t.useImperativeHandle(d,(function(){return q}),[q]),t.useEffect((function(){g.className=f.className||""}),[f.className]),t.useEffect((function(){g.style.cssText="",Object.assign(g.style,f.style)}),[f.style]),o.useBindProp(q,{setter:function(e,t){e.setSize(new AMap.Size(t[0],t[1]))}},f.size),o.useBindProp(q,{setter:"setAnchor",validate:function(e){return c.Anchors.includes(e)}},f.anchor),o.useBindProp(q,{setter:function(e,t){e.setOffset(new window.AMap.Pixel(t[0],t[1]))}},f.offset),o.useBindProp(q,{getter:function(e){return r.lngLat2Array(e.getPosition())},equals:n.nearPair,setter:function(e,t){e.getIsOpen()?e.open(e.getMap(),t):e.setPosition(t)}},f.position),o.useBindProp(q,{setter:function(e,t){f.isCustom||e.setContent(t)}},f.content),o.useBindProp(q,{setter:function(e,t){if(v)if(t){var s=r.lngLat2Array(e.getPosition());e.open(v,s)}else e.close()}},f.visible),s.useEvent(q,"open",f.onOpen),s.useEvent(q,"close",f.onClose),f.isCustom?(q&&(q.setContent(g),P&&q.open(q.getMap(),f.position)),p.createPortal(f.children,g)):null}));exports.default=f;
